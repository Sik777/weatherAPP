<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Check</title>
    <link rel="stylesheet" href="weather_app.css">
    <script src="eel.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap'); 
    </style>
</head>
<body>
    <section class="left">
        <form action="#" style="display: flex; bottom: 100px;">
            <input type="text" value="–ê–ª–º–∞—Ç—ã" placeholder="–ì–æ—Ä–æ–¥" class="city" id="city" autocomplete="off">
            <button class="lupa" id="lupa" type="button">üîçÔ∏é</button>
        </form>
        <section class="time_day">
            <div class="day" id="day"></div>

            <div class="time" id="time"></div>
            <div class="time_img"> <img id="time_img" src="" alt="" height="30px"></div>
        </section>
        <section class="dop_info">
            <div class="pro_addi">
                <div class="pro_addi_result" id="pro_addi_result"></div>
                <div class="pro_addi_text" id="pro_addi_text">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Å–∞–¥–∫–æ–≤</div>
            </div>
            <div class="humidity">
                <div class="humidity_result" id="humidity_result"></div>
                <div class="humidity_text" id="humidity_text">–í–ª–∞–∂–Ω–æ—Å—Ç—å</div>
            </div>
            <div class="wind">
                <div class="wind_result1">
                    <div class="wind_result" id="wind_result"></div>
                    <div class="wind_s" id="wind_s"></div>
                </div>
                <div class="wind_text" id="wind_text">–í–µ—Ç–µ—Ä</div>
            </div>
        </section>
    </section>


    <section class="right">
        <section class="temperature_weather">
            <div class="temperature" id="temperature"></div>
            <div class="weather">
                <div class="weather_img">
                    <img id="weather_img" src="" alt="Weather icon" height="70px">
                </div>
                <div class="weather_text" id="weather_text"></div>
            </div>
        </section>
    </section>
    
    
    <script>
        async function updateWeather(city) {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ —Ñ—É–Ω–∫—Ü–∏–∏ Python
            const weatherData = await eel.weather_check(city)();
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
            document.querySelector("#temperature").textContent = weatherData.temperature;
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø–æ–≥–æ–¥—ã
            document.querySelector("#weather_text").textContent = weatherData.precipitation;
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–º–∞–π–ª –ø–æ–≥–æ–¥—ã
            document.querySelector("#weather_img").src = weatherData.weather_img;
            
            document.querySelector("#day").textContent = weatherData.day;

            document.querySelector("#time").textContent = weatherData.time;

            document.querySelector("#time_img").src = weatherData.time_img;

            document.querySelector("#pro_addi_result").textContent = weatherData.pro_addi;

            document.querySelector("#humidity_result").textContent = weatherData.humidity;

            document.querySelector("#wind_result").textContent = weatherData.wind;
            document.querySelector("#wind_s").textContent = weatherData.wind_s;
        
            const timeInt = parseInt(weatherData.time);
            const weather = weatherData.precipitation

            if (weather == '–î–æ–∂–¥—å' || weather == '–ü–∞—Å–º—É—Ä–Ω–æ' || weather == '–õ–∏–≤–µ–Ω—å' || weather == '–ì—Ä–æ–∑–∞' || weather == '–¢—É–º–∞–Ω' || weather == '–ù–µ–±–æ–ª—å—à–∏–µ –ª–∏–≤–Ω–µ–≤—ã–µ –¥–æ–∂–¥–∏' || weather == '–°–∏–ª—å–Ω–∞—è –≥—Ä–æ–∑–∞'){
                document.body.style.background = 'linear-gradient(to bottom right, #74758f, #525163)';
            } else if (weather == '–°–Ω–µ–≥' || weather == '–ú–µ—Ç–µ–ª—å'){
                document.body.style.background = 'linear-gradient(to bottom right, #adc7ff, #80a1d3)';
            } else if (timeInt >= 6 && timeInt < 12) {
                document.body.style.background = 'linear-gradient(to top left, #f5f11c, 10%, #458fe4)';
            } else if(timeInt >= 12 && timeInt < 18) {
                document.body.style.background = 'linear-gradient(to bottom right, #3970d8, #2637cc';
            } else if(timeInt >= 18 && timeInt < 22) {
                document.body.style.background = 'linear-gradient(to bottom right, #040349, #110d35)';
            } else {
                document.body.style.background = 'linear-gradient(to bottom right, #02023f, #02021f)';
            }
        }
        

        document.querySelector("#lupa").addEventListener("click", () => {
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
            const city = document.querySelector("#city").value;
            updateWeather(city);
        });

        document.addEventListener("DOMContentLoaded", () => {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –¥–ª—è –ê–ª–º–∞—Ç—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
            updateWeather("–ê–ª–º–∞—Ç—ã");
        });
    </script>
</body>
</html>
