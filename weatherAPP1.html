<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Check</title>
    <link rel="stylesheet" href="weather_app.css">
    <script src="eel.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap'); 
    </style>
</head>
<body>
    <div id="overlay" class="overlay">
        <div class="loader">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
    <section class="left">
        <form action="#" style="display: flex; bottom: 100px;">
            <input type="text" value="–ê–ª–º–∞—Ç—ã" placeholder="–ì–æ—Ä–æ–¥" class="city" id="city" autocomplete="off">
            <button class="lupa" id="lupa" type="button">üîçÔ∏é</button>
        </form>
        <section class="time_day">
            <div class="day" id="day"></div>
            <div class="time" id="time"></div>
            <div class="time_img"> <img id="time_img" src="" alt="" height="30px"></div>
        </section>
        <section class="dop_info">
            <div class="pro_addi">
                <div class="pro_addi_result" id="pro_addi_result"></div>
                <div class="pro_addi_text" id="pro_addi_text">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Å–∞–¥–∫–æ–≤</div>
            </div>
            <div class="humidity">
                <div class="humidity_result" id="humidity_result"></div>
                <div class="humidity_text" id="humidity_text">–í–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞</div>
            </div>
            <div class="wind">
                <div class="wind_result1">
                    <div class="wind_result" id="wind_result"></div>
                    <div class="wind_s" id="wind_s"></div>
                </div>
                <div class="wind_text" id="wind_text">–°–∫–æ—Ä–æ—Å—Ç—å –≤–µ—Ç—Ä–∞</div>
            </div>
        </section>
        <section class="city_foto2">
            <img class="foto2" id="foto2" src="https://i.ytimg.com/vi/D2sjupxi0w0/maxresdefault.jpg" alt="" height="218px" width="357px">
        </section>
    </section>

    <section class="right">
        <section class="temperature_weather">
            <div class="temperature" id="temperature"></div>
            <div class="weather">
                <div class="weather_img">
                    <img id="weather_img" src="" alt="Weather icon" height="70px">
                </div>
                <div class="weather_text" id="weather_text"></div>
            </div>
        </section>
        <section class="weather_week">
            <button class="day1">
                <div class="day_week" id="day1_week"></div>
                <img class="day_week_img" id="day1_week_img" height="40px" alt="">
                <div class="day_week_tem" id="day1_week_tem"></div>
            </button>
            <button class="day2">
                <div class="day_week" id="day2_week"></div>
                <img class="day_week_img" id="day2_week_img" height="40px" alt="">
                <div class="day_week_tem" id="day2_week_tem"></div>
            </button>
            <button class="day3">
                <div class="day_week" id="day3_week"></div>
                <img class="day_week_img" id="day3_week_img" height="40px" alt="">
                <div class="day_week_tem" id="day3_week_tem"></div>
            </button>
            <button class="day4">
                <div class="day_week" id="day4_week"></div>
                <img class="day_week_img" id="day4_week_img" height="40px" alt="">
                <div class="day_week_tem" id="day4_week_tem"></div>
            </button>
            <button class="day5">
                <div class="day_week" id="day5_week"></div>
                <img class="day_week_img" id="day5_week_img" height="40px" alt="">
                <div class="day_week_tem" id="day5_week_tem"></div>
            </button>
            <button class="day6">
                <div class="day_week" id="day6_week"></div>
                <img class="day_week_img" id="day6_week_img" height="40px" alt="">
                <div class="day_week_tem" id="day6_week_tem"></div>
            </button>
        </section>
        <section class="city_foto">
            <img class="foto" id="foto" src="https://i.ytimg.com/vi/EXIMII2gtx8/mqdefault.jpg" alt="" height="260px" width="420px">
        </section>
    </section>
    
    <script> 
    document.getElementById("overlay").style.display = "flex";
        async function updateWeather(city) {
    // –ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π
        
        
    try {
        const weatherData = await eel.weather_check(city)();
    
                // –û–±–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                document.querySelector("#temperature").textContent = weatherData.temperature;
                document.querySelector("#weather_text").textContent = weatherData.precipitation;
                document.querySelector("#weather_img").src = weatherData.weather_img;
                document.querySelector("#day").textContent = weatherData.day;
                document.querySelector("#time").textContent = weatherData.time;
                document.querySelector("#time_img").src = weatherData.time_img;
                document.querySelector("#pro_addi_result").textContent = weatherData.pro_addi;
                document.querySelector("#humidity_result").textContent = weatherData.humidity;
                document.querySelector("#wind_result").textContent = weatherData.wind;
                document.querySelector("#wind_s").textContent = weatherData.wind_s;
                document.querySelector("#day1_week_tem").textContent = weatherData.day1_week_tem;
                document.querySelector("#day1_week_img").src = weatherData.day1_week_img;
                document.querySelector("#day2_week_tem").textContent = weatherData.day2_week_tem;
                document.querySelector("#day2_week_img").src = weatherData.day2_week_img;
                document.querySelector("#day3_week_tem").textContent = weatherData.day3_week_tem;
                document.querySelector("#day3_week_img").src = weatherData.day3_week_img;
                document.querySelector("#day4_week_tem").textContent = weatherData.day4_week_tem;
                document.querySelector("#day4_week_img").src = weatherData.day4_week_img;
                document.querySelector("#day5_week_tem").textContent = weatherData.day5_week_tem;
                document.querySelector("#day5_week_img").src = weatherData.day5_week_img;
                document.querySelector("#day6_week_tem").textContent = weatherData.day6_week_tem;
                document.querySelector("#day6_week_img").src = weatherData.day6_week_img;
    
                // –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–≥–æ–¥—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
                const timeInt = parseInt(weatherData.time);
                const weather = weatherData.precipitation;
    
                if (weather === '–î–æ–∂–¥—å' || weather === '–ü–∞—Å–º—É—Ä–Ω–æ' || weather === '–õ–∏–≤–µ–Ω—å' || weather === '–ì—Ä–æ–∑–∞' || weather === '–¢—É–º–∞–Ω' || weather === '–ù–µ–±–æ–ª—å—à–∏–µ –ª–∏–≤–Ω–µ–≤—ã–µ –¥–æ–∂–¥–∏' || weather === '–°–∏–ª—å–Ω–∞—è –≥—Ä–æ–∑–∞') {
                    document.body.style.background = 'linear-gradient(to bottom right, #74758f, #525163)';
                } else if (weather === '–°–Ω–µ–≥' || weather === '–ú–µ—Ç–µ–ª—å') {
                    document.body.style.background = 'linear-gradient(to bottom right, #adc7ff, #80a1d3)';
                } else if (timeInt >= 6 && timeInt < 12) {
                    document.body.style.background = 'linear-gradient(to top left, #f5f11c, 10%, #458fe4)';
                } else if (timeInt >= 12 && timeInt < 18) {
                    document.body.style.background = 'linear-gradient(to bottom right, #3970d8, #2637cc';
                } else if (timeInt >= 18 && timeInt < 22) {
                    document.body.style.background = 'linear-gradient(to bottom right, #040349, #110d35)';
                } else {
                    document.body.style.background = 'linear-gradient(to bottom right, #02023f, #02021f)';
                }
            
                // –û–±–Ω–æ–≤–∏—Ç–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
                const daysMap = {
                    '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫': ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'],
                    '–í—Ç–æ—Ä–Ω–∏–∫': ['–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å', '–ü–Ω'],
                    '–°—Ä–µ–¥–∞': ['–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å', '–ü–Ω', '–í—Ç'],
                    '–ß–µ—Ç–≤–µ—Ä–≥': ['–ß—Ç', '–ü—Ç', '–°–±', '–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä'],
                    '–ü—è—Ç–Ω–∏—Ü–∞': ['–ü—Ç', '–°–±', '–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç'],
                    '–°—É–±–±–æ—Ç–∞': ['–°–±', '–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç'],
                    '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ': ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±']
                };
            
                const currentDay = weatherData.day;
                const days = daysMap[currentDay];
            
                for (let i = 0; i < 6; i++) {
                    const dayElement = document.querySelector(`#day${i + 1}_week`);
                    if (dayElement) {
                        dayElement.textContent = days[i];
                    }
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≥–æ–¥—ã:", error);
            } finally {
                // –°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π
                document.getElementById("overlay").style.display = "none";
            }
        }

        document.querySelector("#lupa").addEventListener("click", () => {
            const city = document.querySelector("#city").value;
            updateWeather(city);
        });

        document.addEventListener("DOMContentLoaded", () => {
            updateWeather("–ê–ª–º–∞—Ç—ã");
        });

        const images = [
            'https://i.ytimg.com/vi/0KltYFCRbG0/hqdefault.jpg?sqp=-oaymwEmCOADEOgC8quKqQMa8AEB-AHUBoAC4AOKAgwIABABGH8gEygdMA8=&rs=AOn4CLDXG1VHrQmWMqPPOwflCj6iQioHew',
            'https://i.ytimg.com/vi/HGOgMKHJFKs/maxresdefault.jpg',
            'https://i.ytimg.com/vi/EXIMII2gtx8/mqdefault.jpg'
        ];

        const images2 = [
            'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQmvLBp_ZkGXyL-hf4ZItlFZrSTN7JNZoxjWA&s',
            'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRPXpMN4eQ6HpKaBAlGfXKlwdQPjsriO75SSA&s',
            'https://zbs.bet/wp-content/uploads/2023/03/risunok-1.-shemy-vyigrysha-na-kanale-telegram-dal-dal-vzletel.jpg',
            'https://i.ytimg.com/vi/D2sjupxi0w0/maxresdefault.jpg'
        ];

        let currentIndex = 0;
        const imageElement = document.getElementById('foto');
        const imageElement2 = document.getElementById('foto2');

        function changeImage() {
            currentIndex = (currentIndex + 1) % images.length;
            imageElement.src = images[currentIndex];
        }

        function changeImage2() {
            currentIndex = (currentIndex + 1) % images2.length;
            imageElement2.src = images2[currentIndex];
        }

        setInterval(changeImage, 10000);
        setInterval(changeImage2, 12000);
    </script>
</body>
</html>
